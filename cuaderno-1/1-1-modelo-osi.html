<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cuaderno 1.1 - Modelo OSI | CyberEdu</title>
    
    <!-- External Dependencies -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-bash.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-powershell.min.js"></script>

    <!-- Supabase Config -->
    <script src="../assets/supabase-config.js"></script>

    <!-- Supabase Config -->
    <script src="../assets/supabase-config.js"></script>
    
    <!-- Shared Styles -->
    <link href="../assets/styles.css" rel="stylesheet">
    
    <!-- OSI Diagram Styles -->
    <style>
        .osi-layer {
            padding: 1rem 1.5rem;
            border-left: 4px solid;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 1rem;
            position: relative;
            overflow: hidden;
        }
        
        .osi-layer::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255, 255, 255, 0.1);
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .osi-layer:hover::before,
        .osi-layer.active::before {
            opacity: 1;
        }
        
        .osi-layer:hover,
        .osi-layer.active {
            transform: translateX(8px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3), 0 0 20px currentColor;
        }
        
        .layer-number {
            font-size: 1.5rem;
            font-weight: 700;
            color: white;
            min-width: 2rem;
            text-align: center;
        }
        
        .layer-name {
            font-weight: 600;
            color: white;
            flex: 1;
            letter-spacing: 0.05em;
        }
        
        .layer-icon {
            font-size: 1.5rem;
            color: rgba(255, 255, 255, 0.8);
        }
        
        .protocol-badge {
            display: inline-block;
            background: rgba(56, 189, 248, 0.2);
            color: #38bdf8;
            padding: 0.25rem 0.75rem;
            border-radius: 0.375rem;
            font-size: 0.75rem;
            font-weight: 600;
            border: 1px solid rgba(56, 189, 248, 0.3);
        }
    </style>
</head>
<body class="bg-slate-900 text-slate-200 h-screen overflow-hidden flex flex-col md:flex-row">

    <!-- Progress Bar -->
    <div id="progress-bar" style="width: 0%"></div>

    <!-- Mobile Header -->
    <div class="md:hidden bg-slate-800 p-4 flex justify-between items-center border-b border-slate-700 z-30">
        <span class="font-bold text-sky-400"><i class="fas fa-shield-alt mr-2"></i>TÃ­tulo Corto</span>
        <div class="flex items-center gap-3">
            <!-- Auth Button (Mobile) -->
            <button id="mobile-auth-btn" onclick="openAuthModal()" class="text-slate-200 hover:text-sky-400 transition-colors">
                <i class="fas fa-user-circle text-xl"></i>
            </button>
            <button id="mobile-menu-btn" class="text-slate-200 hover:text-white">
                <i class="fas fa-bars text-xl"></i>
            </button>
        </div>
    </div>

    <!-- Sidebar -->
    <aside id="sidebar" class="bg-slate-950 w-full md:w-72 flex-shrink-0 border-r border-slate-800 flex flex-col h-full transform -translate-x-full md:translate-x-0 transition-transform duration-300 absolute md:relative z-20 shadow-xl">
        <div class="p-5 border-b border-slate-800">
            <div class="flex items-center gap-3 mb-2">
                <div class="w-9 h-9 rounded bg-sky-500 flex items-center justify-center text-white font-bold shadow-lg shadow-sky-500/30">
                    <i class="fas fa-layer-group"></i>
                </div>
                <div>
                    <h1 class="font-bold text-base text-slate-100">Cuaderno 1.1</h1>
                    <p class="text-xs text-slate-500">Modelo OSI y TCP/IP</p>
                </div>
            </div>
        </div>

        <div class="p-3">
            <div class="relative">
                <i class="fas fa-search absolute left-3 top-2.5 text-slate-500 text-sm"></i>
                <input type="text" id="search-input" placeholder="Buscar..." 
                    class="w-full bg-slate-900 border border-slate-700 rounded-lg py-2 pl-9 pr-4 text-sm text-slate-300 focus:outline-none focus:border-sky-500 transition-colors">
            </div>
        </div>

        <div class="px-4 py-2 text-xs text-slate-500 flex justify-between items-center">
            <span id="progress-text">0/0 completados</span>
            <button onclick="resetProgress()" class="hover:text-slate-300" title="Reiniciar progreso">
                <i class="fas fa-redo-alt"></i>
            </button>
        </div>

        <nav class="flex-1 overflow-y-auto px-2 pb-4 space-y-0.5" id="nav-list"></nav>

        <div class="p-3 border-t border-slate-800 text-center">
            <a href="../index.html" class="text-xs text-slate-500 hover:text-sky-400 transition-colors">
                <i class="fas fa-arrow-left mr-1"></i> Volver a Cuadernos
            </a>
        </div>
    </aside>

    <!-- Auth Button (Desktop) -->
    <button id="auth-btn" onclick="openAuthModal()" 
        class="hidden md:block fixed top-6 right-6 z-50 bg-sky-600 hover:bg-sky-500 text-white px-4 py-2 rounded-lg transition-all shadow-lg">
        <i class="fas fa-sign-in-alt mr-2"></i>Iniciar SesiÃ³n
    </button>

    <!-- Main Content -->
    <main class="flex-1 overflow-y-auto relative w-full bg-slate-900" id="main-scroll">
        <div class="max-w-4xl mx-auto p-6 md:p-10 pb-24 min-h-full">
            <div id="content-area" class="markdown-body transition-opacity duration-300"></div>
            
            <!-- Navigation Buttons -->
            <div class="flex justify-between items-center mt-12 pt-6 border-t border-slate-800">
                <button id="prev-btn" onclick="navigatePrev()" class="flex items-center gap-2 px-4 py-2 bg-slate-800 hover:bg-slate-700 rounded-lg transition-colors text-sm">
                    <i class="fas fa-arrow-left"></i> <span>Anterior</span>
                </button>
                <button id="next-btn" onclick="navigateNext()" class="flex items-center gap-2 px-4 py-2 bg-sky-600 hover:bg-sky-500 rounded-lg transition-colors text-sm">
                    <span>Siguiente</span> <i class="fas fa-arrow-right"></i>
                </button>
            </div>
        </div>
    </main>

    <!-- Back to Top -->
    <button id="back-to-top" onclick="scrollToTop()">
        <i class="fas fa-arrow-up"></i>
    </button>

    <script>const CUADERNO_ID = "cuaderno-1-1";</script>
    
    <script>
    const lessons = [
    {
        "id": "portada",
        "title": "Inicio",
        "category": "general",
        "icon": "fas fa-home",
        "isPremium": false,
        "content": "\n                <div class=\"text-center py-8\">\n                    <div class=\"inline-flex items-center justify-center w-20 h-20 rounded-2xl bg-gradient-to-br from-sky-500 to-indigo-600 text-white text-4xl mb-6 shadow-lg shadow-sky-500/30\">\n                        <i class=\"fas fa-layer-group\"></i>\n                    </div>\n                    <h1 class=\"text-4xl font-bold mb-4 bg-gradient-to-r from-sky-400 to-indigo-400 bg-clip-text text-transparent\">Modelo OSI y TCP/IP</h1>\n                    <p class=\"text-slate-400 text-lg mb-8\">Fundamentos de Arquitectura de Redes</p>\n                    \n                    <div class=\"grid grid-cols-2 md:grid-cols-4 gap-4 max-w-2xl mx-auto mb-10\">\n                        <div class=\"bg-slate-800/50 rounded-lg p-4 border border-slate-700\">\n                            <div class=\"text-2xl font-bold text-sky-400\">7</div>\n                            <div class=\"text-xs text-slate-500\">Capas OSI</div>\n                        </div>\n                        <div class=\"bg-slate-800/50 rounded-lg p-4 border border-slate-700\">\n                            <div class=\"text-2xl font-bold text-emerald-400\">4</div>\n                            <div class=\"text-xs text-slate-500\">Capas TCP/IP</div>\n                        </div>\n                        <div class=\"bg-slate-800/50 rounded-lg p-4 border border-slate-700\">\n                            <div class=\"text-2xl font-bold text-amber-400\">7</div>\n                            <div class=\"text-xs text-slate-500\">Lecciones</div>\n                        </div>\n                        <div class=\"bg-slate-800/50 rounded-lg p-4 border border-slate-700\">\n                            <div class=\"text-2xl font-bold text-rose-400\">ğŸŸ¢</div>\n                            <div class=\"text-xs text-slate-500\">Principiante</div>\n                        </div>\n                    </div>\n                </div>\n\n                <h2>Â¿Por quÃ© existe el Modelo OSI?</h2>\n                <p>Antes de 1984, cada fabricante de equipos de red usaba sus propios protocolos propietarios. Un ordenador IBM no podÃ­a comunicarse con uno de Digital Equipment, y las redes de Novell no hablaban con las de Microsoft. Era el <strong>caos de la incompatibilidad</strong>.</p>\n                \n                <p>La <strong>OrganizaciÃ³n Internacional de NormalizaciÃ³n (ISO)</strong> creÃ³ el modelo OSI (<em>Open Systems Interconnection</em>) como un marco de referencia universal. Su objetivo era que cualquier sistema de cualquier fabricante pudiera comunicarse con cualquier otro, siempre que ambos siguieran el mismo estÃ¡ndar.</p>\n\n                <div class=\"note-box\">\n                    <p><strong>ğŸ§  AnalogÃ­a - El Sistema Postal Internacional:</strong> Imagina que cada paÃ­s tuviera su propio sistema de correos incompatible: sobres de diferentes tamaÃ±os, sellos que no se reconocen, direcciones en formatos distintos. El modelo OSI es como el acuerdo internacional que estandariza: \"todos usaremos sobres de estos tamaÃ±os, las direcciones irÃ¡n en este formato, y los sellos indicarÃ¡n esto\". Gracias a esa estandarizaciÃ³n, puedes enviar una carta desde EspaÃ±a a JapÃ³n sin preocuparte de cÃ³mo funciona internamente el correo japonÃ©s.</p>\n                </div>\n\n                <h2>Contenido del Cuaderno</h2>\n                <ul class=\"list-disc pl-6 mb-6 space-y-2\">\n                    <li><strong>LecciÃ³n 1:</strong> Las Dos Mitades del Modelo - Estructura y organizaciÃ³n</li>\n                    <li><strong>LecciÃ³n 2:</strong> Resumen de Cada Capa - VisiÃ³n general de las 7 capas</li>\n                    <li><strong>LecciÃ³n 3:</strong> Diagrama Interactivo OSI - ExploraciÃ³n visual e interactiva</li>\n                    <li><strong>LecciÃ³n 4:</strong> EncapsulaciÃ³n - El flujo de datos entre capas</li>\n                    <li><strong>LecciÃ³n 5:</strong> Headers y PDUs - Nombres y contenido en cada capa</li>\n                    <li><strong>LecciÃ³n 6:</strong> OSI vs TCP/IP - El modelo teÃ³rico vs el prÃ¡ctico</li>\n                    <li><strong>LecciÃ³n 7:</strong> Ataques por Capa - Relevancia en ciberseguridad</li>\n                </ul>\n\n                <h2>Relevancia en Ciberseguridad</h2>\n                <p>Entender el modelo OSI es <strong>fundamental</strong> para cualquier profesional de ciberseguridad porque:</p>\n                <ul class=\"list-disc pl-6 mb-6 space-y-2\">\n                    <li><strong>Los ataques se clasifican por capa:</strong> ARP Spoofing (L2), IP Spoofing (L3), SYN Flood (L4), SQL Injection (L7)</li>\n                    <li><strong>Las defensas tambiÃ©n:</strong> VLANs (L2), Firewalls (L3-L4), WAF (L7)</li>\n                    <li><strong>El anÃ¡lisis de trÃ¡fico</strong> con herramientas como Wireshark requiere entender quÃ© informaciÃ³n hay en cada capa</li>\n                    <li><strong>El troubleshooting</strong> de red sigue un enfoque por capas: \"Â¿hay conectividad fÃ­sica? Â¿hay comunicaciÃ³n L2? Â¿resuelve DNS?\"</li>\n                </ul>\n\n                <div class=\"warning-box\">\n                    <p><strong>âš ï¸ Importante:</strong> El modelo OSI es un <strong>modelo de referencia teÃ³rico</strong>. Internet realmente usa el modelo TCP/IP, que es mÃ¡s simple. Sin embargo, OSI sigue siendo la base para enseÃ±ar, documentar y analizar redes porque es mÃ¡s granular y descriptivo.</p>\n                </div>\n\n                <h2>NemotÃ©cnicos para Memorizar las 7 Capas</h2>\n                <p>Las 7 capas son fÃ¡ciles de olvidar. Usa estos trucos:</p>\n                \n                <div class=\"grid md:grid-cols-2 gap-4 mb-6\">\n                    <div class=\"bg-slate-800/50 rounded-lg p-4 border border-slate-700\">\n                        <p class=\"text-sky-400 font-semibold mb-2\"><i class=\"fas fa-arrow-up mr-2\"></i>De abajo a arriba (1â†’7)</p>\n                        <p class=\"text-lg font-mono\">\"<strong class=\"text-emerald-400\">P</strong>lease <strong class=\"text-emerald-400\">D</strong>o <strong class=\"text-emerald-400\">N</strong>ot <strong class=\"text-emerald-400\">T</strong>hrow <strong class=\"text-emerald-400\">S</strong>ausage <strong class=\"text-emerald-400\">P</strong>izza <strong class=\"text-emerald-400\">A</strong>way\"</p>\n                        <p class=\"text-xs text-slate-500 mt-2\">Physical â†’ Data Link â†’ Network â†’ Transport â†’ Session â†’ Presentation â†’ Application</p>\n                    </div>\n                    <div class=\"bg-slate-800/50 rounded-lg p-4 border border-slate-700\">\n                        <p class=\"text-amber-400 font-semibold mb-2\"><i class=\"fas fa-arrow-down mr-2\"></i>De arriba a abajo (7â†’1)</p>\n                        <p class=\"text-lg font-mono\">\"<strong class=\"text-amber-400\">A</strong>ll <strong class=\"text-amber-400\">P</strong>eople <strong class=\"text-amber-400\">S</strong>eem <strong class=\"text-amber-400\">T</strong>o <strong class=\"text-amber-400\">N</strong>eed <strong class=\"text-amber-400\">D</strong>ata <strong class=\"text-amber-400\">P</strong>rocessing\"</p>\n                        <p class=\"text-xs text-slate-500 mt-2\">Application â†’ Presentation â†’ Session â†’ Transport â†’ Network â†’ Data Link â†’ Physical</p>\n                    </div>\n                </div>\n\n                <hr class=\"border-slate-700 my-8\">\n                <p class=\"text-center text-slate-500\">Usa los botones de navegaciÃ³n o las flechas del teclado <kbd class=\"bg-slate-800 px-2 py-1 rounded text-xs\">â†</kbd> <kbd class=\"bg-slate-800 px-2 py-1 rounded text-xs\">â†’</kbd> para moverte entre lecciones.</p>\n            "
    },
    {
        "id": "dos-mitades",
        "title": "1. Las Dos Mitades del Modelo",
        "category": "general",
        "icon": "fas fa-layer-group",
        "isPremium": false,
        "content": "\n                <h1>Las Dos Mitades del Modelo</h1>\n                \n                <p>El modelo OSI organiza las funciones de red en <strong>7 capas</strong>, cada una con responsabilidades especÃ­ficas. Esta separaciÃ³n permite que cada capa se desarrolle y evolucione independientemente, siempre que mantenga las interfaces con las capas adyacentes.</p>\n\n                <h2>VisualizaciÃ³n de las 7 Capas</h2>\n                <div class=\"bg-slate-800 rounded-lg p-4 mb-6 border border-slate-700 overflow-x-auto\">\n<pre class=\"!bg-transparent !p-0 !m-0 text-sm\"><code class=\"!bg-transparent text-emerald-400\">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚  7. APLICACIÃ“N (Application)        â”‚ â† Usuario/Programas\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚  6. PRESENTACIÃ“N (Presentation)     â”‚ â† Formato de datos\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚  5. SESIÃ“N (Session)                â”‚ â† GestiÃ³n de diÃ¡logos\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚  4. TRANSPORTE (Transport)          â”‚ â† ComunicaciÃ³n end-to-end\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚  3. RED (Network)                   â”‚ â† Enrutamiento entre redes\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚  2. ENLACE DE DATOS (Data Link)     â”‚ â† ComunicaciÃ³n salto a salto\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚  1. FÃSICA (Physical)               â”‚ â† Hardware/SeÃ±ales\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>\n                </div>\n\n                <p>El modelo OSI se divide conceptualmente en dos grupos:</p>\n\n                <hr class=\"border-slate-700 my-6\">\n\n                <h2><i class=\"fas fa-laptop-code text-indigo-400 mr-2\"></i>Capas Superiores (7, 6, 5) - \"Capas de Host\"</h2>\n                <p><strong>Se enfocan en el software y las aplicaciones:</strong></p>\n                <ul class=\"list-disc pl-6 mb-4 space-y-2\">\n                    <li>Estas capas manejan la representaciÃ³n de datos para el usuario</li>\n                    <li>Gestionan las sesiones entre aplicaciones</li>\n                    <li>Proveen servicios de red a las aplicaciones</li>\n                </ul>\n                <p><strong>DÃ³nde viven:</strong> En tu computadora, servidor, smartphone</p>\n\n                <div class=\"bg-gradient-to-br from-indigo-900/30 to-purple-900/30 rounded-lg p-5 border border-indigo-700/50 my-6\">\n                    <p class=\"text-sm text-slate-300\"><i class=\"fas fa-lightbulb text-amber-400 mr-2\"></i><strong>AnalogÃ­a:</strong> Las capas superiores son como la oficina que redacta la carta, decide el idioma en que se escribe, y gestiona la correspondencia con el destinatario.</p>\n                </div>\n\n                <hr class=\"border-slate-700 my-6\">\n\n                <h2><i class=\"fas fa-network-wired text-emerald-400 mr-2\"></i>Capas Inferiores (4, 3, 2, 1) - \"Capas de Transporte\"</h2>\n                <p><strong>Se enfocan en mover datos por la red:</strong></p>\n                <ul class=\"list-disc pl-6 mb-4 space-y-2\">\n                    <li>Estas capas manejan la transmisiÃ³n fÃ­sica de bits</li>\n                    <li>Direccionan y enrutan paquetes</li>\n                    <li>Garantizan la entrega de extremo a extremo</li>\n                </ul>\n                <p><strong>DÃ³nde viven:</strong> En tu computadora, pero tambiÃ©n en routers, switches, cables</p>\n\n                <div class=\"bg-gradient-to-br from-emerald-900/30 to-cyan-900/30 rounded-lg p-5 border border-emerald-700/50 my-6\">\n                    <p class=\"text-sm text-slate-300\"><i class=\"fas fa-lightbulb text-amber-400 mr-2\"></i><strong>AnalogÃ­a:</strong> Las capas inferiores son el sistema de clasificaciÃ³n, los camiones, aviones, carteros y buzones que mueven fÃ­sicamente la carta de un lugar a otro.</p>\n                </div>\n\n                <hr class=\"border-slate-700 my-6\">\n\n                <h2>Resumen Visual</h2>\n                <table>\n                    <thead>\n                        <tr>\n                            <th>Grupo</th>\n                            <th>Capas</th>\n                            <th>Enfoque</th>\n                            <th>UbicaciÃ³n</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr>\n                            <td><span class=\"text-indigo-400 font-semibold\">Capas de Host</span></td>\n                            <td>7, 6, 5</td>\n                            <td>Software y aplicaciones</td>\n                            <td>Solo en endpoints (PCs, servidores)</td>\n                        </tr>\n                        <tr>\n                            <td><span class=\"text-emerald-400 font-semibold\">Capas de Transporte</span></td>\n                            <td>4, 3, 2, 1</td>\n                            <td>Mover datos por la red</td>\n                            <td>Endpoints + dispositivos de red</td>\n                        </tr>\n                    </tbody>\n                </table>\n            "
    },
    {
        "id": "resumen-capas",
        "title": "2. Resumen de Cada Capa",
        "category": "general",
        "icon": "fas fa-sitemap",
        "isPremium": false,
        "content": "\n                <h1>Resumen RÃ¡pido de Cada Capa</h1>\n                <p>Antes de profundizar en cada una, aquÃ­ tienes el \"TL;DR\" de quÃ© hace cada capa:</p>\n\n                <hr class=\"border-slate-700 my-6\">\n\n                <h2><span class=\"inline-block w-8 h-8 rounded bg-rose-500 text-white text-center leading-8 mr-2 text-sm font-bold\">7</span>Capa 7: AplicaciÃ³n</h2>\n                <p class=\"text-lg text-slate-400 italic mb-4\">\"La capa del usuario\"</p>\n                <ul class=\"list-disc pl-6 mb-4 space-y-2\">\n                    <li><strong>QuÃ© hace:</strong> Interfaz entre la aplicaciÃ³n del usuario y la red</li>\n                    <li><strong>Ejemplos:</strong> <code>HTTP</code>, <code>FTP</code>, <code>SMTP</code>, <code>DNS</code>, <code>SSH</code></li>\n                    <li><strong>En tÃ©rminos simples:</strong> Es donde tu navegador solicita una pÃ¡gina web, tu cliente de email envÃ­a correos, etc.</li>\n                </ul>\n\n                <hr class=\"border-slate-700 my-6\">\n\n                <h2><span class=\"inline-block w-8 h-8 rounded bg-orange-500 text-white text-center leading-8 mr-2 text-sm font-bold\">6</span>Capa 6: PresentaciÃ³n</h2>\n                <p class=\"text-lg text-slate-400 italic mb-4\">\"La capa de traducciÃ³n\"</p>\n                <ul class=\"list-disc pl-6 mb-4 space-y-2\">\n                    <li><strong>QuÃ© hace:</strong> Traduce, cifra y comprime datos</li>\n                    <li><strong>Ejemplos:</strong> <code>SSL/TLS</code>*, <code>JPEG</code>, <code>GIF</code>, <code>ASCII</code>, <code>EBCDIC</code></li>\n                    <li><strong>En tÃ©rminos simples:</strong> Convierte los datos a un formato que ambas partes entiendan</li>\n                </ul>\n\n                <div class=\"warning-box\">\n                    <p><strong>âš ï¸ Nota sobre SSL/TLS:</strong> En el modelo teÃ³rico OSI, el cifrado se clasifica en Capa 6. Sin embargo, en la prÃ¡ctica, TLS opera entre las capas 4-5, estableciendo una sesiÃ³n segura sobre TCP. Esta es una de las razones por las que el modelo OSI es una simplificaciÃ³n pedagÃ³gica y no una implementaciÃ³n real.</p>\n                </div>\n\n                <hr class=\"border-slate-700 my-6\">\n\n                <h2><span class=\"inline-block w-8 h-8 rounded bg-amber-500 text-white text-center leading-8 mr-2 text-sm font-bold\">5</span>Capa 5: SesiÃ³n</h2>\n                <p class=\"text-lg text-slate-400 italic mb-4\">\"La capa de coordinaciÃ³n\"</p>\n                <ul class=\"list-disc pl-6 mb-4 space-y-2\">\n                    <li><strong>QuÃ© hace:</strong> Establece, mantiene y termina sesiones entre aplicaciones</li>\n                    <li><strong>Ejemplos:</strong> <code>NetBIOS</code>, <code>RPC</code>, <code>PPTP</code></li>\n                    <li><strong>En tÃ©rminos simples:</strong> Mantiene la \"conversaciÃ³n\" abierta entre dos aplicaciones</li>\n                </ul>\n\n                <div class=\"note-box\">\n                    <p><strong>ğŸ’¡ Ejemplo prÃ¡ctico:</strong> Cuando descargas un archivo grande y la conexiÃ³n se interrumpe, la capa de sesiÃ³n puede permitir reanudar la descarga desde donde se quedÃ³ (checkpoints).</p>\n                </div>\n\n                <hr class=\"border-slate-700 my-6\">\n\n                <h2><span class=\"inline-block w-8 h-8 rounded bg-yellow-500 text-white text-center leading-8 mr-2 text-sm font-bold\">4</span>Capa 4: Transporte</h2>\n                <p class=\"text-lg text-slate-400 italic mb-4\">\"La capa de entrega confiable\"</p>\n                <ul class=\"list-disc pl-6 mb-4 space-y-2\">\n                    <li><strong>QuÃ© hace:</strong> Segmenta datos, garantiza entrega end-to-end</li>\n                    <li><strong>Ejemplos:</strong> <code>TCP</code> (confiable), <code>UDP</code> (rÃ¡pido)</li>\n                    <li><strong>En tÃ©rminos simples:</strong> Decide si enviar con \"acuse de recibo\" (TCP) o simplemente lanzar los datos (UDP)</li>\n                </ul>\n\n                <hr class=\"border-slate-700 my-6\">\n\n                <h2><span class=\"inline-block w-8 h-8 rounded bg-emerald-500 text-white text-center leading-8 mr-2 text-sm font-bold\">3</span>Capa 3: Red</h2>\n                <p class=\"text-lg text-slate-400 italic mb-4\">\"La capa de direccionamiento lÃ³gico\"</p>\n                <ul class=\"list-disc pl-6 mb-4 space-y-2\">\n                    <li><strong>QuÃ© hace:</strong> Enrutamiento entre diferentes redes, direccionamiento IP</li>\n                    <li><strong>Ejemplos:</strong> <code>IP</code>, <code>ICMP</code>, routers</li>\n                    <li><strong>En tÃ©rminos simples:</strong> Determina la ruta que tomarÃ¡n tus datos desde tu casa hasta el servidor de Google</li>\n                </ul>\n\n                <hr class=\"border-slate-700 my-6\">\n\n                <h2><span class=\"inline-block w-8 h-8 rounded bg-sky-500 text-white text-center leading-8 mr-2 text-sm font-bold\">2</span>Capa 2: Enlace de Datos</h2>\n                <p class=\"text-lg text-slate-400 italic mb-4\">\"La capa de direccionamiento fÃ­sico\"</p>\n                <ul class=\"list-disc pl-6 mb-4 space-y-2\">\n                    <li><strong>QuÃ© hace:</strong> ComunicaciÃ³n entre dispositivos en la misma red local, detecciÃ³n de errores</li>\n                    <li><strong>Ejemplos:</strong> <code>Ethernet</code>, <code>WiFi (802.11)</code>, MAC addresses, switches</li>\n                    <li><strong>En tÃ©rminos simples:</strong> Mueve datos de un dispositivo al siguiente en la misma red (tu PC â†’ router)</li>\n                </ul>\n\n                <hr class=\"border-slate-700 my-6\">\n\n                <h2><span class=\"inline-block w-8 h-8 rounded bg-violet-500 text-white text-center leading-8 mr-2 text-sm font-bold\">1</span>Capa 1: FÃ­sica</h2>\n                <p class=\"text-lg text-slate-400 italic mb-4\">\"La capa de bits y seÃ±ales\"</p>\n                <ul class=\"list-disc pl-6 mb-4 space-y-2\">\n                    <li><strong>QuÃ© hace:</strong> TransmisiÃ³n de bits crudos sobre el medio fÃ­sico</li>\n                    <li><strong>Ejemplos:</strong> Cables, conectores, voltajes, frecuencias de radio, hubs</li>\n                    <li><strong>En tÃ©rminos simples:</strong> Los unos y ceros reales viajando como electricidad, luz o radio</li>\n                </ul>\n\n                <hr class=\"border-slate-700 my-6\">\n\n                <h2>Tabla Resumen</h2>\n                <table>\n                    <thead>\n                        <tr>\n                            <th>Capa</th>\n                            <th>Nombre</th>\n                            <th>FunciÃ³n Principal</th>\n                            <th>Ejemplos</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr>\n                            <td><span class=\"text-rose-400 font-bold\">7</span></td>\n                            <td>AplicaciÃ³n</td>\n                            <td>Interfaz usuario-red</td>\n                            <td>HTTP, DNS, SSH</td>\n                        </tr>\n                        <tr>\n                            <td><span class=\"text-orange-400 font-bold\">6</span></td>\n                            <td>PresentaciÃ³n</td>\n                            <td>TraducciÃ³n, cifrado</td>\n                            <td>TLS*, JPEG, ASCII</td>\n                        </tr>\n                        <tr>\n                            <td><span class=\"text-amber-400 font-bold\">5</span></td>\n                            <td>SesiÃ³n</td>\n                            <td>GestiÃ³n de diÃ¡logos</td>\n                            <td>NetBIOS, RPC</td>\n                        </tr>\n                        <tr>\n                            <td><span class=\"text-yellow-400 font-bold\">4</span></td>\n                            <td>Transporte</td>\n                            <td>Entrega end-to-end</td>\n                            <td>TCP, UDP</td>\n                        </tr>\n                        <tr>\n                            <td><span class=\"text-emerald-400 font-bold\">3</span></td>\n                            <td>Red</td>\n                            <td>Enrutamiento</td>\n                            <td>IP, ICMP</td>\n                        </tr>\n                        <tr>\n                            <td><span class=\"text-sky-400 font-bold\">2</span></td>\n                            <td>Enlace de Datos</td>\n                            <td>ComunicaciÃ³n local</td>\n                            <td>Ethernet, WiFi</td>\n                        </tr>\n                        <tr>\n                            <td><span class=\"text-violet-400 font-bold\">1</span></td>\n                            <td>FÃ­sica</td>\n                            <td>TransmisiÃ³n de bits</td>\n                            <td>Cables, voltajes</td>\n                        </tr>\n                    </tbody>\n                </table>\n\n                <div class=\"note-box\">\n                    <p><strong>ğŸ”— Profundizar:</strong> Cada uno de estos protocolos se explica en detalle en \n                    <a href=\"1-2-protocolos.html\" class=\"text-sky-400 hover:underline\">Protocolos de Red Esenciales (1.2)</a>.</p>\n                </div>\n            "
    },
    {
        "id": "diagrama-interactivo",
        "title": "3. Diagrama Interactivo OSI",
        "category": "general",
        "icon": "fas fa-hand-pointer",
        "isPremium": true,
        "content": ""
    },
    {
        "id": "encapsulacion",
        "title": "4. EncapsulaciÃ³n",
        "category": "general",
        "icon": "fas fa-boxes-stacked",
        "isPremium": false,
        "content": "\n                <h1>El Flujo de Datos: EncapsulaciÃ³n</h1>\n                <p>AquÃ­ estÃ¡ el concepto <strong>MÃS IMPORTANTE</strong> del modelo OSI: <strong>encapsulaciÃ³n</strong>.</p>\n\n                <hr class=\"border-slate-700 my-6\">\n\n                <h2>Cuando ENVÃAS datos (Capa 7 â†’ Capa 1)</h2>\n                <p>Cada capa aÃ±ade su propia informaciÃ³n (header) antes de pasar los datos a la capa inferior:</p>\n\n                <div class=\"bg-slate-800 rounded-lg p-4 mb-6 border border-slate-700 overflow-x-auto\">\n<pre class=\"!bg-transparent !p-0 !m-0 text-sm\"><code class=\"!bg-transparent text-emerald-400\">Capa 7: Datos originales\n        â†“\nCapa 6: [Header-6] Datos\n        â†“\nCapa 5: [Header-5] [Header-6] Datos\n        â†“\nCapa 4: [Header-4] [Header-5] [Header-6] Datos\n        â†“\nCapa 3: [Header-3] [Header-4] [Header-5] [Header-6] Datos\n        â†“\nCapa 2: [Header-2] [Header-3] [Header-4] [Header-5] [Header-6] Datos [Trailer-2]\n        â†“\nCapa 1: 010110101... (bits en el cable)</code></pre>\n                </div>\n\n                <div class=\"note-box\">\n                    <p><strong>ğŸ§  AnalogÃ­a - MuÃ±ecas Rusas (Matryoshka):</strong> Es como empacar una muÃ±eca rusa: cada capa envuelve lo que recibiÃ³ de arriba con su propia capa de informaciÃ³n. La muÃ±eca mÃ¡s pequeÃ±a (tus datos originales) queda en el centro, rodeada de capas sucesivas que aÃ±aden informaciÃ³n necesaria para el transporte.</p>\n                </div>\n\n                <hr class=\"border-slate-700 my-6\">\n\n                <h2>Cuando RECIBES datos (Capa 1 â†’ Capa 7)</h2>\n                <p>El proceso inverso: <strong>desencapsulaciÃ³n</strong></p>\n                <p>Cada capa:</p>\n                <ol class=\"list-decimal pl-6 mb-4 space-y-2\">\n                    <li>Lee su header/trailer</li>\n                    <li>Procesa la informaciÃ³n relevante</li>\n                    <li>Elimina su header/trailer</li>\n                    <li>Pasa el resto a la capa superior</li>\n                </ol>\n\n                <div class=\"bg-slate-800 rounded-lg p-4 mb-6 border border-slate-700 overflow-x-auto\">\n<pre class=\"!bg-transparent !p-0 !m-0 text-sm\"><code class=\"!bg-transparent text-sky-400\">Capa 1: Recibe bits, los convierte en frame\n        â†“\nCapa 2: Lee header-2 y trailer-2, verifica errores, los elimina\n        â†“\nCapa 3: Lee header-3 (direcciÃ³n IP), decide si es para esta mÃ¡quina, lo elimina\n        â†“\nCapa 4: Lee header-4 (puerto TCP/UDP), reensambla segmentos, lo elimina\n        â†“\nCapa 5: Lee header-5, gestiona la sesiÃ³n, lo elimina\n        â†“\nCapa 6: Lee header-6, descifra/descomprime si es necesario, lo elimina\n        â†“\nCapa 7: Datos originales llegan a la aplicaciÃ³n</code></pre>\n                </div>\n\n                <div class=\"note-box\">\n                    <p><strong>ğŸ’¡ Nota:</strong> La Capa 2 es la Ãºnica que aÃ±ade un <strong>trailer</strong> ademÃ¡s del header. Este trailer contiene el FCS (Frame Check Sequence), una suma de verificaciÃ³n que permite detectar errores de transmisiÃ³n.</p>\n                </div>\n            "
    },
    {
        "id": "headers-pdu",
        "title": "5. Headers y PDUs",
        "category": "general",
        "icon": "fas fa-tag",
        "isPremium": true,
        "content": ""
    },
    {
        "id": "osi-vs-tcpip",
        "title": "6. OSI vs TCP/IP",
        "category": "general",
        "icon": "fas fa-code-compare",
        "isPremium": true,
        "content": ""
    },
    {
        "id": "ataques-por-capa",
        "title": "7. Ataques por Capa",
        "category": "Attack",
        "icon": "fas fa-skull-crossbones",
        "isPremium": true,
        "content": ""
    }
];
    </script>
    
    <!-- Shared App Logic -->
    <script src="../assets/app.js"></script>
    
    <!-- OSI Diagram Interactive Logic -->
    <script>
    // Datos del diagrama OSI
    const OSI_LAYER_DATA = {
        7: {
            name: "APLICACIÃ“N",
            subtitle: "Capa 7 - Layer 7",
            icon: "fas fa-globe",
            color: "#f43f5e",
            function: "Interfaz entre las aplicaciones de usuario y la red. Proporciona servicios de red directamente a las aplicaciones.",
            protocols: ["HTTP", "HTTPS", "FTP", "SSH", "DNS", "SMTP", "IMAP", "POP3", "Telnet", "SNMP"],
            headers: "HTTP Request/Response headers, DNS queries, SMTP commands",
            devices: "Proxies, WAF (Web Application Firewall), Load Balancers, Application Gateways",
            pdu: "Datos (Data)",
            example: "Cuando escribes 'google.com' en tu navegador, HTTP (L7) formatea la peticiÃ³n GET para solicitar la pÃ¡gina web."
        },
        6: {
            name: "PRESENTACIÃ“N",
            subtitle: "Capa 6 - Layer 6",
            icon: "fas fa-palette",
            color: "#f97316",
            function: "Traduce, cifra/descifra y comprime datos entre el formato de aplicaciÃ³n y el formato de red.",
            protocols: ["SSL/TLS", "JPEG", "GIF", "MPEG", "ASCII", "EBCDIC", "MIME"],
            headers: "TLS Record header, cifrado simÃ©trico/asimÃ©trico",
            devices: "Gateways de traducciÃ³n, proxies SSL/TLS",
            pdu: "Datos (Data)",
            example: "Cuando visitas una web HTTPS, TLS (L6) cifra tus datos antes de enviarlos por la red."
        },
        5: {
            name: "SESIÃ“N",
            subtitle: "Capa 5 - Layer 5",
            icon: "fas fa-link",
            color: "#f59e0b",
            function: "Establece, mantiene y finaliza sesiones entre aplicaciones. Gestiona el diÃ¡logo y la sincronizaciÃ³n.",
            protocols: ["NetBIOS", "RPC", "PPTP", "L2TP", "SMB"],
            headers: "Session ID, tokens de autenticaciÃ³n",
            devices: "Gateways de sesiÃ³n",
            pdu: "Datos (Data)",
            example: "Cuando inicias sesiÃ³n en un sitio web, L5 mantiene tu sesiÃ³n activa aunque cambies de pÃ¡gina."
        },
        4: {
            name: "TRANSPORTE",
            subtitle: "Capa 4 - Layer 4",
            icon: "fas fa-truck",
            color: "#eab308",
            function: "Proporciona entrega confiable o no confiable de datos extremo a extremo. Controla el flujo y detecta errores.",
            protocols: ["TCP", "UDP", "SCTP", "DCCP"],
            headers: "TCP header (puertos origen/destino, nÃºmeros de secuencia, flags), UDP header (puertos, checksum)",
            devices: "Firewalls L4 (stateful), Load Balancers L4",
            pdu: "Segmento (TCP) / Datagrama (UDP)",
            example: "TCP (L4) divide un archivo grande en segmentos numerados, los envÃ­a y verifica que todos lleguen correctamente."
        },
        3: {
            name: "RED",
            subtitle: "Capa 3 - Layer 3",
            icon: "fas fa-map-marked-alt",
            color: "#10b981",
            function: "Determina la ruta entre origen y destino. Direccionamiento lÃ³gico (IP) y enrutamiento.",
            protocols: ["IP", "IPv6", "ICMP", "OSPF", "BGP", "RIP", "EIGRP"],
            headers: "IP header (IPs origen/destino, TTL, protocolo, checksum)",
            devices: "Routers, Routers L3, Firewalls L3",
            pdu: "Paquete (Packet)",
            example: "IP (L3) determina que para llegar a 8.8.8.8 (Google DNS) debe pasar por 5 routers especÃ­ficos."
        },
        2: {
            name: "ENLACE DE DATOS",
            subtitle: "Capa 2 - Layer 2",
            icon: "fas fa-ethernet",
            color: "#0ea5e9",
            function: "Transferencia confiable de datos entre dos nodos conectados directamente. Direccionamiento fÃ­sico (MAC).",
            protocols: ["Ethernet", "ARP", "PPP", "VLAN", "STP", "Wi-Fi (802.11)"],
            headers: "Ethernet frame (MACs origen/destino, EtherType, VLAN tag)",
            devices: "Switches, Bridges, NICs (tarjetas de red), Access Points",
            pdu: "Trama (Frame)",
            example: "Ethernet (L2) aÃ±ade las direcciones MAC de tu PC y del router para que el switch sepa a dÃ³nde enviar la trama."
        },
        1: {
            name: "FÃSICA",
            subtitle: "Capa 1 - Layer 1",
            icon: "fas fa-bolt",
            color: "#8b5cf6",
            function: "TransmisiÃ³n de bits en bruto a travÃ©s del medio fÃ­sico. Define voltajes, frecuencias y medios de transmisiÃ³n.",
            protocols: ["Ninguno (especificaciones fÃ­sicas como: 100BASE-T, 1000BASE-T, RS-232)"],
            headers: "PreÃ¡mbulo, SFD (Start Frame Delimiter)",
            devices: "Hubs, Repetidores, Cables (UTP, fibra Ã³ptica), Conectores RJ-45",
            pdu: "Bits",
            example: "Tu cable Ethernet (L1) convierte los bits '10110011' en pulsos elÃ©ctricos que viajan a 100 Mbps."
        }
    };

    // Inicializar diagrama cuando se cargue la lecciÃ³n
    function initOSIDiagram() {
        const layers = document.querySelectorAll('.osi-layer');
        if (layers.length === 0) return; // No estÃ¡ cargada todavÃ­a
        
        const placeholder = document.getElementById('placeholder');
        const layerDetails = document.getElementById('layer-details');
        const layerIconDisplay = document.getElementById('layer-icon-display');
        const layerTitle = document.getElementById('layer-title');
        const layerSubtitle = document.getElementById('layer-subtitle');
        const layerFunction = document.getElementById('layer-function');
        const layerProtocols = document.getElementById('layer-protocols');
        const layerHeaders = document.getElementById('layer-headers');
        const layerDevices = document.getElementById('layer-devices');
        const layerPdu = document.getElementById('layer-pdu');
        const layerExample = document.getElementById('layer-example');

        function showLayerInfo(layerNum) {
            const data = OSI_LAYER_DATA[layerNum];
            
            placeholder.classList.add('hidden');
            layerDetails.classList.remove('hidden');
            
            layerIconDisplay.style.background = data.color;
            layerIconDisplay.innerHTML = '<i class="' + data.icon + '"></i>';
            layerTitle.textContent = data.name;
            layerSubtitle.textContent = data.subtitle;
            layerFunction.textContent = data.function;
            layerHeaders.textContent = data.headers;
            layerDevices.textContent = data.devices;
            layerPdu.textContent = data.pdu;
            layerExample.textContent = data.example;
            
            layerProtocols.innerHTML = data.protocols.map(function(p) {
                return '<span class="protocol-badge">' + p + '</span>';
            }).join('');
            
            layers.forEach(function(l) { l.classList.remove('active'); });
            const activeLayer = document.querySelector('[data-layer="' + layerNum + '"]');
            if (activeLayer) activeLayer.classList.add('active');
        }

        layers.forEach(function(layer) {
            layer.addEventListener('mouseenter', function() {
                const layerNum = layer.getAttribute('data-layer');
                showLayerInfo(layerNum);
            });
            
            layer.addEventListener('click', function() {
                const layerNum = layer.getAttribute('data-layer');
                showLayerInfo(layerNum);
            });
        });

        setTimeout(function() { showLayerInfo(7); }, 100);
    }

    // Hook al loadLesson original para detectar cuando se carga diagrama-interactivo
    (function() {
        const originalLoadLesson = window.loadLesson;
        
        window.loadLesson = function(id) {
            if (originalLoadLesson) {
                originalLoadLesson(id);
            }
            
            if (id === 'diagrama-interactivo') {
                setTimeout(initOSIDiagram, 200);
            }
        };
    })();
    </script>
</body>
</html>
